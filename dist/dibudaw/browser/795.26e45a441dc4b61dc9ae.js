(self.webpackChunkdibudaw=self.webpackChunkdibudaw||[]).push([[795],{2795:(e,t,i)=>{"use strict";i.r(t),i.d(t,{MainModule:()=>ye});var n=i(1116),o=i(3307),r=i(2693),s=i(1462),c=i(8360),a=i(25),l=i(2613),d=i(2590),u=i(3137);const g=function(){return["/home"]},h=function(){return["/terms"]};let p=(()=>{class e{constructor(e,t,i){this.backService=e,this.authService=t,this.frontService=i,this.user=this.backService.user}ngOnInit(){}changeEmail(e){/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/.test(e)?this.authService.changeField("email",e):this.frontService.showToast({type:"error",title:"",subhead:"El nuevo email no es valido ",options:{}})}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(l.h),a.Y36(d.e),a.Y36(u.R))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-change-email"]],decls:27,vars:7,consts:[[1,"row"],[1,"col-12"],["role","button",1,"btn","btn-dark","float-end","dd-mgt-0-5","dd-mgr-0-5",3,"routerLink"],[1,"bi","bi-arrow-return-left"],[1,"dd-pdt-200px"],[1,"col-md-4","offset-md-4"],[1,"d-flex","justify-content-center"],[1,"text-decoration-none","dd-mgb-2",3,"routerLink"],[1,"dibudaw"],[1,"bi","bi-pencil",2,"font-size","20px"],[1,"form-body","rounded"],["id","login","role","tabpanel","aria-labelledby","login-tab",1,"tab-pane","fade","show","active"],[1,"innter-form"],["method","post",1,"sa-innate-form"],["for","email",1,"dd-mgr-2"],["type","email","name","email",3,"placeholder","key.enter"],["email",""],["for","terminos",1,"dd-mgr-2"],[3,"routerLink"],["type","checkbox","name","terminos","id","terminos"],["type","submit","value","Enviar",3,"click"],[1,"clearfix"]],template:function(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"a",2),a._UZ(3,"i",3),a.qZA(),a.qZA(),a.qZA(),a.TgZ(4,"div",4),a.TgZ(5,"div",0),a.TgZ(6,"div",5),a.TgZ(7,"div",6),a.TgZ(8,"a",7),a.TgZ(9,"h1",8),a._uU(10,"dibudaw.io\xa0"),a._UZ(11,"i",9),a.qZA(),a.qZA(),a.qZA(),a.TgZ(12,"div",10),a.TgZ(13,"div",11),a.TgZ(14,"div",12),a.TgZ(15,"form",13),a.TgZ(16,"label",14),a._uU(17,"Cambiar E-mail"),a.qZA(),a.TgZ(18,"input",15,16),a.NdJ("key.enter",function(){a.CHM(e);const i=a.MAs(19);return t.changeEmail(i.value)}),a.qZA(),a.TgZ(20,"label",17),a.TgZ(21,"span",18),a._uU(22,"Acepto los terminos y las condiciones de uso"),a.qZA(),a.qZA(),a._UZ(23,"input",19),a._UZ(24,"br"),a.TgZ(25,"input",20),a.NdJ("click",function(){a.CHM(e);const i=a.MAs(19);return t.changeEmail(i.value)}),a.qZA(),a.qZA(),a.qZA(),a._UZ(26,"div",21),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}2&e&&(a.xp6(2),a.Q6J("routerLink",a.DdM(4,g)),a.xp6(6),a.Q6J("routerLink",a.DdM(5,g)),a.xp6(10),a.s9C("placeholder",t.user.email),a.xp6(3),a.Q6J("routerLink",a.DdM(6,h)))},directives:[c.yS,s.vK,s.JL,s.F,c.rH],encapsulation:2}),e})();const m=function(){return["/home"]},Z=function(){return["/terms"]};let b=(()=>{class e{constructor(e,t,i){this.backService=e,this.authService=t,this.frontService=i,this.user=this.backService.user}ngOnInit(){}changePassword(e,t,i){e.length<254&&t.length<254&&i.length<254?t==i?this.authService.changeField("password",t,e):this.frontService.showToast({type:"error",title:"",subhead:"Las contrase\xf1as no coinciden",options:{}}):this.frontService.showToast({type:"error",title:"",subhead:"Las contrase\xf1as introducidas superan los 254 caracteres",options:{}})}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(l.h),a.Y36(d.e),a.Y36(u.R))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-change-password"]],decls:35,vars:6,consts:[[1,"row"],[1,"col-12"],["role","button",1,"btn","btn-dark","float-end","dd-mgt-0-5","dd-mgr-0-5",3,"routerLink"],[1,"bi","bi-arrow-return-left"],[1,"container","dd-mgt-7"],[1,"col-md-4","offset-md-4"],[1,"d-flex","justify-content-center"],[1,"text-decoration-none","dd-mgb-2",3,"routerLink"],[1,"dibudaw"],[1,"bi","bi-pencil",2,"font-size","20px"],[1,"form-body","rounded"],["id","login","role","tabpanel","aria-labelledby","login-tab",1,"tab-pane","fade","show","active"],[1,"innter-form"],["method","post",1,"sa-innate-form"],["for","idActualPassword"],["type","password","id","idActualPassword",1,"form-control"],["oldPass",""],["for","idPassword"],["type","password","id","idPassword",1,"form-control"],["newPass1",""],["for","idPassword2"],["type","password","id","idPassword2",1,"form-control"],["newPass2",""],["for","terminos",1,"dd-mgr-2"],[3,"routerLink"],["type","checkbox","name","terminos","id","terminos"],["type","submit","value","Enviar",3,"click"],[1,"clearfix"]],template:function(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"a",2),a._UZ(3,"i",3),a.qZA(),a.qZA(),a.qZA(),a.TgZ(4,"div",4),a.TgZ(5,"div",0),a.TgZ(6,"div",5),a.TgZ(7,"div",6),a.TgZ(8,"a",7),a.TgZ(9,"h1",8),a._uU(10,"dibudaw.io\xa0"),a._UZ(11,"i",9),a.qZA(),a.qZA(),a.qZA(),a.TgZ(12,"div",10),a.TgZ(13,"div",11),a.TgZ(14,"div",12),a.TgZ(15,"form",13),a.TgZ(16,"label",14),a._uU(17,"Contrase\xf1a actual"),a.qZA(),a._UZ(18,"input",15,16),a._UZ(20,"br"),a.TgZ(21,"label",17),a._uU(22,"Nueva contrase\xf1a"),a.qZA(),a._UZ(23,"input",18,19),a.TgZ(25,"label",20),a._uU(26,"Confirmar nueva contrase\xf1a"),a.qZA(),a._UZ(27,"input",21,22),a.TgZ(29,"label",23),a.TgZ(30,"span",24),a._uU(31,"Acepto los terminos y las condiciones de uso"),a.qZA(),a.qZA(),a._UZ(32,"input",25),a.TgZ(33,"input",26),a.NdJ("click",function(){a.CHM(e);const i=a.MAs(19),n=a.MAs(24),o=a.MAs(28);return t.changePassword(i.value,n.value,o.value)}),a.qZA(),a.qZA(),a.qZA(),a._UZ(34,"div",27),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}2&e&&(a.xp6(2),a.Q6J("routerLink",a.DdM(3,m)),a.xp6(6),a.Q6J("routerLink",a.DdM(4,m)),a.xp6(22),a.Q6J("routerLink",a.DdM(5,Z)))},directives:[c.yS,s.vK,s.JL,s.F,c.rH],encapsulation:2}),e})();const v=function(){return["/config/email"]},f=function(){return["/config/password"]};let A=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-config"]],decls:4,vars:4,consts:[[3,"routerLink"]],template:function(e,t){1&e&&(a.TgZ(0,"a",0),a._uU(1,"email"),a.qZA(),a.TgZ(2,"a",0),a._uU(3,"password"),a.qZA()),2&e&&(a.Q6J("routerLink",a.DdM(2,v)),a.xp6(2),a.Q6J("routerLink",a.DdM(3,f)))},directives:[c.yS],encapsulation:2}),e})();var T=i(5371);const q=["count"],k=["clock"],x=["baseTimerLabel"],S=["baseTimerPathRemaining"];function w(e,t){if(1&e&&(a.ynx(0),a.TgZ(1,"span"),a._uU(2),a.qZA(),a._UZ(3,"br"),a.BQk()),2&e){const e=t.$implicit,i=a.oxw(2);a.xp6(1),a.Akn(e.id==i.backService.game.dynamicData.currentlyDrawingUser?"background-color: pink;":""),a.xp6(1),a.Oqu(e.name)}}function y(e,t){if(1&e&&(a.ynx(0),a._UZ(1,"img",34),a._UZ(2,"br"),a.TgZ(3,"span",35),a._uU(4),a.qZA(),a.BQk()),2&e){const e=a.oxw().$implicit;a.xp6(4),a.Oqu(e.score)}}function _(e,t){if(1&e&&(a.ynx(0),a._UZ(1,"img",36),a._UZ(2,"br"),a.TgZ(3,"span",35),a._uU(4),a.qZA(),a.BQk()),2&e){const e=a.oxw().$implicit;a.xp6(4),a.Oqu(e.score)}}function U(e,t){if(1&e&&(a.ynx(0),a._UZ(1,"img",37),a._UZ(2,"br"),a.TgZ(3,"span",35),a._uU(4),a.qZA(),a.BQk()),2&e){const e=a.oxw().$implicit;a.xp6(4),a.Oqu(e.score)}}function C(e,t){if(1&e&&(a.ynx(0),a.TgZ(1,"div",38),a._uU(2),a.qZA(),a.BQk()),2&e){const e=a.oxw().$implicit;a.xp6(2),a.Oqu(e.score)}}function R(e,t){if(1&e&&(a.TgZ(0,"li",31),a.TgZ(1,"div",6),a.TgZ(2,"div",25),a.YNc(3,w,4,4,"ng-container",32),a.qZA(),a.TgZ(4,"div",26),a.YNc(5,y,5,1,"ng-container",33),a.YNc(6,_,5,1,"ng-container",33),a.YNc(7,U,5,1,"ng-container",33),a.YNc(8,C,3,1,"ng-container",33),a.qZA(),a.qZA(),a.qZA()),2&e){const e=t.$implicit,i=t.index,n=a.oxw();a.xp6(1),a.Akn(n.backService.game.dynamicData.currentlyDrawingTeam==e.number?"background-color: lightblue;":""),a.xp6(2),a.Q6J("ngForOf",e.members),a.xp6(2),a.Q6J("ngIf",0==i),a.xp6(1),a.Q6J("ngIf",1==i),a.xp6(1),a.Q6J("ngIf",2==i),a.xp6(1),a.Q6J("ngIf",i>=3)}}function L(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",39),a.TgZ(1,"button",40),a.NdJ("click",function(){return a.CHM(e),a.oxw().endGame()}),a._uU(2,"Terminar partida"),a.qZA(),a.qZA()}}function D(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",41),a.TgZ(1,"button",42),a.NdJ("click",function(){return a.CHM(e),a.oxw().endGame()}),a._uU(2,"Terminar partida"),a.qZA(),a.qZA()}}const M=function(){return["/login"]};let F=(()=>{class e{constructor(e,t,i){this.data=e,this.backService=t,this.socketService=i,this.startingTime=0,this.currentWord="madro\xf1era",this.roomData=this.backService.room,this.user=this.backService.user,this.backService.roomSubscriptions.push(this.backService.roomSubject.subscribe(e=>{this.roomData=e})),this.backService.roomSubscriptions.push(this.backService.userSubject.subscribe(e=>{this.user=e})),this.timeLength=this.formatTime.toString().length}ngOnInit(){this.socketService.roundTimeSubject.subscribe(e=>{e.i?this.data.showSpinner({timeLeft:e.rt,options:{fullScreen:!0,type:"square-jelly-box"}}):null!=e.tt&&(this.timeLeft=e.tt,e.tt!=+this.basetimerlabel.nativeElement.innerHTML-1&&(this.startingTime=e.tt),this.basetimerlabel.nativeElement.innerHTML=this.formatTime(e.tt),this.setCircleDasharray(e.tt),this.setRemainingPathColor(e.tt))})}endGame(){this.socketService.endGame()}formatTime(e){let t=e.toString();for(;t.length<2;)t="0"+t;return t}setRemainingPathColor(e){e>=2*this.startingTime/3?(console.log(2*this.startingTime/3),this.basetimerpathremaining.nativeElement.style.color="rgb(65, 184, 131)"):this.basetimerpathremaining.nativeElement.style.color=e>=1*this.startingTime/3?"orange":"red"}calculateTimeFraction(e){const t=e/this.startingTime;return t-1/this.startingTime*(1-t)}setCircleDasharray(e){const t=`${(283*this.calculateTimeFraction(e)).toFixed(0)} 283`;this.basetimerpathremaining.nativeElement.setAttribute("stroke-dasharray",t)}toggleSound(){this.backService.sound=!this.backService.sound,this.data.setSounds(this.backService.sound)}toggleMusic(){this.backService.music=!this.backService.music,this.data.setMusic(this.backService.music)}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(u.R),a.Y36(l.h),a.Y36(T.W))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-sidebar"]],viewQuery:function(e,t){if(1&e&&(a.Gf(q,1),a.Gf(k,1),a.Gf(x,1),a.Gf(S,1)),2&e){let e;a.iGM(e=a.CRH())&&(t.count=e.first),a.iGM(e=a.CRH())&&(t.clock=e.first),a.iGM(e=a.CRH())&&(t.basetimerlabel=e.first),a.iGM(e=a.CRH())&&(t.basetimerpathremaining=e.first)}},decls:37,vars:7,consts:[[1,"d-flex","justify-content-center"],[2,"text-decoration","none",3,"routerLink"],[1,"neonText","h1Neon"],[1,"bi","bi-pencil","pencil",2,"font-size","20px"],[1,"card",2,"margin","7% 2% 0 5%","border","2px solid black"],[1,"card-body"],[1,"row"],["title","M\xfasica de fondo",1,"btn","btn-config","dd-fit-content",3,"click"],["alt","M\xfasica"],["id","clock",1,"col-6"],["clock",""],[1,"base-timer"],["viewBox","0 0 100 100","xmlns","http://www.w3.org/2000/svg",1,"base-timer__svg"],[1,"base-timer__circle"],["cx","50","cy","50","r","45",1,"base-timer__path-elapsed"],["id","base-timer-path-remaining","stroke-dasharray","283","d","\n                      M 50, 50\n                      m -45, 0\n                      a 45,45 0 1,0 90,0\n                      a 45,45 0 1,0 -90,0\n                      ",1,"base-timer__path-remaining"],["baseTimerPathRemaining",""],[0,"xml","space","preserve","x","-69","y","60","id","text841","transform","scale(-1,1)",2,"font-style","normal","font-weight","normal","font-size","32px","line-height","1.25","font-family","sans-serif","fill","#000000","fill-opacity","1","stroke","none","stroke-width","0.956112"],["baseTimerLabel",""],["title","Efectos de sonido",1,"btn","btn-config","dd-fit-content",3,"click"],["alt","Sonido"],[2,"margin-top","5%"],[1,"jumbotron","list-content"],[1,"list-group"],["href","#",1,"list-group-item-score","title"],[1,"col-9"],[1,"col-3"],[1,"position"],["class","list-group-item",4,"ngFor","ngForOf"],["class","card-footer d-grid gap-1",4,"ngIf"],["class","card-footer d-grid gap-1 cursorNotAllowed",4,"ngIf"],[1,"list-group-item"],[4,"ngFor","ngForOf"],[4,"ngIf"],["src","/assets/images/uno.png","width","100%"],[2,"font-size","1.8vh"],["src","/assets/images/dos.png","width","100%"],["src","/assets/images/tres.png","width","100%"],[1,"col-3","d-flex","justify-content-center",2,"align-items","center"],[1,"card-footer","d-grid","gap-1"],["type","submit",1,"btn","btn-danger",3,"click"],[1,"card-footer","d-grid","gap-1","cursorNotAllowed"],["type","submit","disabled","",1,"btn","btn-danger",3,"click"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"a",1),a.TgZ(2,"h1",2),a._uU(3,"dibudaw.io\xa0"),a._UZ(4,"i",3),a.qZA(),a.qZA(),a.qZA(),a.TgZ(5,"div",4),a.TgZ(6,"div",5),a.TgZ(7,"div",6),a.TgZ(8,"div",0),a.TgZ(9,"button",7),a.NdJ("click",function(){return t.toggleMusic()}),a._UZ(10,"img",8),a.qZA(),a.TgZ(11,"div",9,10),a.TgZ(13,"div",0),a.TgZ(14,"div",11),a.O4$(),a.TgZ(15,"svg",12),a.TgZ(16,"g",13),a._UZ(17,"circle",14),a._UZ(18,"path",15,16),a.qZA(),a._UZ(20,"text",17,18),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.kcU(),a.TgZ(22,"button",19),a.NdJ("click",function(){return t.toggleSound()}),a._UZ(23,"img",20),a.qZA(),a.qZA(),a.qZA(),a.TgZ(24,"div",21),a.TgZ(25,"div",22),a.TgZ(26,"ul",23),a.TgZ(27,"li",24),a.TgZ(28,"div",6),a.TgZ(29,"div",25),a._uU(30,"Jugadores"),a.qZA(),a.TgZ(31,"div",26),a._uU(32,"Pts"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(33,"div",27),a.YNc(34,R,9,8,"li",28),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.YNc(35,L,3,0,"div",29),a.YNc(36,D,3,0,"div",30),a.qZA()),2&e&&(a.xp6(1),a.Q6J("routerLink",a.DdM(6,M)),a.xp6(9),a.uIk("src",t.backService.music?"assets/images/music-note.png":"assets/images/music-note-beamed.png",a.LSH),a.xp6(13),a.uIk("src",t.backService.sound?"assets/images/volume-up-fill.png":"assets/images/volume-mute-fill.png",a.LSH),a.xp6(11),a.Q6J("ngForOf",t.backService.scoreboard),a.xp6(1),a.Q6J("ngIf",t.user&&t.roomData&&t.user.id==t.roomData.owner),a.xp6(1),a.Q6J("ngIf",!t.user||!t.roomData||t.user.id!=t.roomData.owner))},directives:[c.yS,n.sg,n.O5],encapsulation:2}),e})();function J(e,t){if(1&e&&(a.ynx(0),a.TgZ(1,"div",4),a.TgZ(2,"h2",5),a._uU(3),a.qZA(),a.qZA(),a.TgZ(4,"div",2),a.TgZ(5,"div",6),a.TgZ(6,"a",7),a._UZ(7,"img",8),a.qZA(),a.TgZ(8,"a",7),a._UZ(9,"img",9),a.qZA(),a.qZA(),a.qZA(),a.BQk()),2&e){const e=a.oxw();a.xp6(3),a.hij(" ",e.backService.game.dynamicData.currentWord," "),a.xp6(3),a.MGl("href","https://dle.rae.es/",e.backService.game.dynamicData.currentWord,"",a.LSH),a.xp6(2),a.MGl("href","https://www.google.es/search?q=",e.backService.game.dynamicData.currentWord,"&hl=es&tbm=isch",a.LSH)}}function N(e,t){if(1&e&&(a.ynx(0),a.TgZ(1,"div",4),a.TgZ(2,"h2",5),a._uU(3),a.qZA(),a.qZA(),a.TgZ(4,"div",2),a.TgZ(5,"div",6),a.TgZ(6,"a",10),a._UZ(7,"img",11),a.qZA(),a.TgZ(8,"a",10),a._UZ(9,"img",12),a.qZA(),a.qZA(),a.qZA(),a.BQk()),2&e){const e=a.oxw();a.xp6(3),a.hij(" ",e.backService.game.dynamicData.wordStatus," ")}}let I=(()=>{class e{constructor(e,t,i){this.data=e,this.backService=t,this.componentElement=i,this.currentWord="madro\xf1era",this.roomData=this.backService.room,this.user=this.backService.user,this.backService.roomSubscriptions.push(this.backService.roomSubject.subscribe(e=>{this.roomData=e})),this.backService.roomSubscriptions.push(this.backService.userSubject.subscribe(e=>{this.user=e}))}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(u.R),a.Y36(l.h),a.Y36(a.SBq))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-word-info"]],decls:5,vars:2,consts:[[1,"container"],[1,"row"],[1,"col"],[4,"ngIf"],[1,"col","d-flex","justify-content-center"],[2,"color","white","margin-top","3%"],[1,"input-group",2,"margin-top","1.2rem"],["target","_blank","id","helpWord",3,"href"],["src","../../../../assets/images/diccionario3.png","alt","Busqueda de palabra en diccionario.",2,"width","2.2rem"],["src","../../../../assets/images/searchImage2.png","alt","",2,"width","2.2rem"],["href","","id","helpWord",1,"cursorNotAllowed",2,"pointer-events","none"],["src","../../../../assets/images/diccionarioDisabled.png","alt","Busqueda de palabra en diccionario - Deshabilidtado",2,"width","2.2rem"],["src","../../../../assets/images/searchImageDisabled.png","alt","",2,"width","2.2rem"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a._UZ(2,"div",2),a.YNc(3,J,10,3,"ng-container",3),a.YNc(4,N,10,1,"ng-container",3),a.qZA(),a.qZA()),2&e&&(a.xp6(3),a.Q6J("ngIf",t.backService.game.dynamicData.currentlyDrawingTeam==t.backService.team),a.xp6(1),a.Q6J("ngIf",t.backService.game.dynamicData.currentlyDrawingTeam!=t.backService.team))},directives:[n.O5],encapsulation:2}),e})();var E=i(7254),Y=i(4689),j=i(5416),z=i(2855);const O=["canvasHTML"];let B=(()=>{class e{constructor(e,t,i){this.data=e,this.socketsService=t,this.backService=i,this.externalDrawSubscription=this.socketsService.onStroke().subscribe(e=>{this.externalDraw(e)}),this.socketsService.onCanvasClear()}setCanvasAccess(e){e==this.backService.user.id?this.eventCapture(this.canvasGood):this.disableEventCapture(this.canvasGood)}ngAfterViewInit(){this.setCanvasAccess(this.backService.game.dynamicData.currentlyDrawingUser),this.gameSubscription=this.backService.gameSubject.subscribe(e=>{console.log("hay que actualizar los permisos del canvas."),this.setCanvasAccess(e.dynamicData.currentlyDrawingUser)})}getScreenSize(e){this.screenHeight=window.innerHeight,this.screenWidth=window.innerWidth,this.width=window.innerWidth/1.8,this.height=window.innerHeight/1.28}ngOnInit(){this.getScreenSize(),this.canvasGood=this.canvas.nativeElement,this.context=this.canvasGood.getContext("2d"),this.context.lineWidth=3,this.context.lineCap="round",this.context.strokeStyle=this.data.color,this.colorSubscription=this.data.colorChange.subscribe(e=>{this.context.strokeStyle=e}),this.context.lineWidth=this.data.brushSize,this.colorSubscription=this.data.brushSizeChange.subscribe(e=>{this.context.lineWidth=e}),this.clearSubscription=this.data.clearChange.subscribe(e=>{this.context.clearRect(0,0,this.canvasGood.width,this.canvasGood.height)})}disableEventCapture(e){var t,i,n;console.log("ejecutamos disableEventCapture()"),null===(t=this.canvasSubscription)||void 0===t||t.unsubscribe(),this.canvasSubscription=void 0,null===(i=this.canvasMobileSubscription)||void 0===i||i.unsubscribe(),null===(n=this.canvasMobileSubscription)||void 0===n||n.unsubscribe()}eventCapture(e){if(null==this.canvasSubscription){function t(t,i){let n=e.getBoundingClientRect();return{x:e.width/n.width*(t-n.left),y:e.height/n.height*(i-n.top)}}let i=e=>{let i=t(e[0].clientX,e[0].clientY),n=t(e[1].clientX,e[1].clientY);this.draw(i,n),this.socketsService.wannaStroke({pp:i,cp:n,c:String(this.context.strokeStyle),s:this.context.lineWidth})},n=e=>{let i=t(e[0].touches[0].clientX,e[0].touches[0].clientY),n=t(e[1].touches[0].clientX,e[1].touches[0].clientY);this.draw(i,n),this.socketsService.wannaStroke({pp:i,cp:n,c:String(this.context.strokeStyle),s:this.context.lineWidth})};console.log("ejecutamos eventCapture()");const o=(0,E.R)(e,"mousedown"),r=(0,E.R)(e,"touchstart",{passive:!0});this.canvasMobileSubscription=r.pipe((0,Y.w)(t=>(0,E.R)(e,"touchmove").pipe((0,j.R)((0,E.R)(e,"touchend")),(0,j.R)((0,E.R)(e,"touchcancel")),(0,z.G)()))).subscribe(n),this.canvasSubscription=o.pipe((0,Y.w)(t=>(0,E.R)(e,"mousemove").pipe((0,j.R)((0,E.R)(e,"mouseup")),(0,j.R)((0,E.R)(e,"mouseleave")),(0,z.G)()))).subscribe(i)}}draw(e,t){this.context&&(this.context.beginPath(),e&&(this.context.moveTo(e.x,e.y),this.context.lineTo(t.x,t.y),this.context.stroke()))}externalDraw(e){this.context.strokeStyle=e.c,this.context.lineWidth=e.s,this.draw(e.pp,e.cp)}ngOnDestroy(){var e,t,i,n,o;null===(e=this.colorSubscription)||void 0===e||e.unsubscribe(),null===(t=this.gameSubscription)||void 0===t||t.unsubscribe(),null===(i=this.clearSubscription)||void 0===i||i.unsubscribe(),null===(n=this.canvasSubscription)||void 0===n||n.unsubscribe(),null===(o=this.canvasMobileSubscription)||void 0===o||o.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(u.R),a.Y36(T.W),a.Y36(l.h))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-canvas"]],viewQuery:function(e,t){if(1&e&&a.Gf(O,3),2&e){let e;a.iGM(e=a.CRH())&&(t.canvas=e.first)}},hostBindings:function(e,t){1&e&&a.NdJ("resize",function(e){return t.getScreenSize(e)},!1,a.Jf7)},inputs:{width:"width",height:"height"},decls:2,vars:0,consts:[["id","canvas","width","1000","height","1000",1,"cursorCanvas","canvasPaint"],["canvasHTML",""]],template:function(e,t){1&e&&a._UZ(0,"canvas",0,1)},encapsulation:2}),e})();const G=["colorPicker"],H=["colorPickerBtn"],Q=["hexaColor"],P=["divColorPicker"];let $=(()=>{class e{constructor(e,t,i,n){this.data=e,this.backService=t,this.componentElement=i,this.socketService=n,this.currentWord="madro\xf1era",this.showingColorPicker=!1,this.roomData=this.backService.room,this.user=this.backService.user,this.backService.roomSubscriptions.push(this.backService.roomSubject.subscribe(e=>{this.roomData=e})),this.backService.roomSubscriptions.push(this.backService.userSubject.subscribe(e=>{this.user=e}))}setColorBrush(e){this.data.setColorService(e)}setSize(e){this.data.setSizeService(e)}Clear(){this.backService.game.dynamicData.currentlyDrawingUser==this.backService.user.id&&(this.socketService.wannaClear(),this.data.setClearService())}loadColorPicker(){const e=this.colorPicker.nativeElement,t=this.colorPickerBtn.nativeElement,i=e.getContext("2d"),n=this.hexaColor.nativeElement,o=new Image;o.onload=function(){i.drawImage(o,0,0,o.width,o.height)},o.src="assets/images/colorwheel5.png",e.addEventListener("mousemove",function(e){let o=e.target.getBoundingClientRect(),r=e.offsetX||e.pageX-o.left-window.scrollX,s=e.offsetY||e.pageY-o.top-window.scrollY,c=i.getImageData(r,s,1,1).data;t.style.backgroundColor="rgb("+c[0]+", "+c[1]+", "+c[2]+")",n.value="#"+("0000"+(c[2]+256*c[1]+65536*c[0]).toString(16)).substr(-6)})}toggleColorPicker(){this.showingColorPicker=!this.showingColorPicker}ngAfterViewInit(){this.loadColorPicker()}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(u.R),a.Y36(l.h),a.Y36(a.SBq),a.Y36(T.W))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-tools"]],viewQuery:function(e,t){if(1&e&&(a.Gf(G,1),a.Gf(H,1),a.Gf(Q,1),a.Gf(P,1)),2&e){let e;a.iGM(e=a.CRH())&&(t.colorPicker=e.first),a.iGM(e=a.CRH())&&(t.colorPickerBtn=e.first),a.iGM(e=a.CRH())&&(t.hexaColor=e.first),a.iGM(e=a.CRH())&&(t.divColorPicker=e.first)}},decls:27,vars:6,consts:[[1,"input-group"],["type","hidden","id","hexVal"],["hexaColor",""],[3,"click"],["colorPickerBtn",""],[1,"btn-group"],["id","colorBlack",3,"click"],["id","colorGrey",3,"click"],["id","colorDarkRed",3,"click"],["id","colorRed",3,"click"],["id","colorOrange",3,"click"],["id","colorYellow",3,"click"],["id","colorGreen",3,"click"],["id","colorBlue",3,"click"],["id","colorDarkBlue",3,"click"],["id","colorViolet",3,"click"],["id","clearAll",3,"click"],[1,"bi","bi-trash-fill"],["id","eraser",1,"eraser",3,"click"],[1,"bi","bi-eraser-fill"],["type","range","min","1","max","60","value","3",1,"dd-mgr-2",3,"change"],["hsize",""],[2,"position","relative"],["divColorPicker",""],["id","picker","width","300","height","300",1,"color",3,"click"],["colorPicker",""]],template:function(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",0),a._UZ(1,"input",1,2),a.TgZ(3,"div",3,4),a.NdJ("click",function(){return t.toggleColorPicker()}),a.qZA(),a.TgZ(5,"div",5),a.TgZ(6,"button",6),a.NdJ("click",function(){return t.setColorBrush("black")}),a.qZA(),a.TgZ(7,"button",7),a.NdJ("click",function(){return t.setColorBrush("grey")}),a.qZA(),a.TgZ(8,"button",8),a.NdJ("click",function(){return t.setColorBrush("rgb(136, 0, 21)")}),a.qZA(),a.TgZ(9,"button",9),a.NdJ("click",function(){return t.setColorBrush("red")}),a.qZA(),a.TgZ(10,"button",10),a.NdJ("click",function(){return t.setColorBrush("orange")}),a.qZA(),a.TgZ(11,"button",11),a.NdJ("click",function(){return t.setColorBrush("yellow")}),a.qZA(),a.TgZ(12,"button",12),a.NdJ("click",function(){return t.setColorBrush("green")}),a.qZA(),a.TgZ(13,"button",13),a.NdJ("click",function(){return t.setColorBrush("blue")}),a.qZA(),a.TgZ(14,"button",14),a.NdJ("click",function(){return t.setColorBrush("rgb(63, 72, 204)")}),a.qZA(),a.TgZ(15,"button",15),a.NdJ("click",function(){return t.setColorBrush("violet")}),a.qZA(),a.qZA(),a.TgZ(16,"button",16),a.NdJ("click",function(){return t.Clear()}),a._UZ(17,"i",17),a.qZA(),a.TgZ(18,"button",18),a.NdJ("click",function(){return t.setColorBrush("white")}),a._UZ(19,"i",19),a.qZA(),a.TgZ(20,"input",20,21),a.NdJ("change",function(){a.CHM(e);const i=a.MAs(21);return t.setSize(i.value)}),a.qZA(),a.qZA(),a.TgZ(22,"div",22),a.TgZ(23,"div",null,23),a.TgZ(25,"canvas",24,25),a.NdJ("click",function(){a.CHM(e);const i=a.MAs(2);return t.setColorBrush(i.value),t.toggleColorPicker()}),a.qZA(),a.qZA(),a.qZA()}2&e&&(a.xp6(3),a.Gre("",t.showingColorPicker?"preview2":"preview"," dd-mgb-1 dd-mgr-22px"),a.xp6(20),a.Gre("colorpicker ",t.showingColorPicker?"":"dd-display-none",""))},encapsulation:2}),e})();const W=["roundTicker"];let X=(()=>{class e{constructor(e){this.socketService=e,this.timeLeft=0,this.startingTime=0,this.diff="100%"}ngOnInit(){this.socketService.roundTimeSubject.subscribe(e=>{e.i||(e.rt!=this.timeLeft-1&&(this.startingTime=e.rt),this.timeLeft=e.rt,this.diff=(this.timeLeft/this.startingTime*100).toFixed(0)+"%",this.tickerRef.nativeElement.style.height=this.diff)})}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(T.W))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-timer"]],viewQuery:function(e,t){if(1&e&&a.Gf(W,1),2&e){let e;a.iGM(e=a.CRH())&&(t.tickerRef=e.first)}},decls:10,vars:1,consts:[[2,"margin-top","5%","margin-right","5%"],[1,"jumbotron","list-content"],[1,"row"],["stopwatch",""],[1,"container-timer"],["id","countdown",1,"countdown--wide","countdown"],["id","ticker",1,"countdown__fill"],["roundTicker",""],["id","seconds",1,"countdown__digit"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"div",2,3),a.TgZ(4,"div",4),a.TgZ(5,"div",5),a._UZ(6,"div",6,7),a.TgZ(8,"div",8),a._uU(9),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(9),a.Oqu(t.diff))},encapsulation:2}),e})();function V(e,t){if(1&e&&(a.TgZ(0,"p",8),a.TgZ(1,"span"),a._uU(2),a.qZA(),a._uU(3),a.qZA()),2&e){const e=t.$implicit;a.xp6(1),a.Jzz("color: ",e.color,";"),a.xp6(1),a.hij("",e.sender,":"),a.xp6(1),a.hij(" ",e.content,"")}}let K=(()=>{class e{constructor(e,t){this.socketService=e,this.backService=t,this.chat=[],this.chatColors=[[],["red","orange"],["blue","lightblue"],["purple","pink"],["green","lightgreen"],["black","grey"],["brown","yellow"]],console.log(t.team),this.socketService.onMessage().subscribe(e=>{this.chat.push(e)}),this.color=this.memberColor(this.backService.user.id)}ngOnInit(){}memberColor(e){for(const[t,i]of this.backService.room.teams.entries())for(const[n,o]of i.entries())if(o.id==e)return this.chatColors[t][n];return"black"}sendMessage(e){console.log(e),""!=e&&this.socketService.wannaChat({sender:this.backService.user.name,color:this.color,content:e})}ngOnDestroy(){}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(T.W),a.Y36(l.h))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-chat"]],decls:9,vars:2,consts:[[1,"card","dd-chat"],[1,"card-body"],["class","small",4,"ngFor","ngForOf"],[1,"card-footer"],[1,"input-group"],["type","text","placeholder","Mensaje / Palabra","aria-label","Mensaje","aria-describedby","basic-addon1",1,"form-control",3,"keyup.enter"],["msg",""],["type","button","value",">",1,"btn","btn-primary",3,"click"],[1,"small"]],template:function(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"div"),a.YNc(3,V,4,5,"p",2),a.qZA(),a.qZA(),a.TgZ(4,"div",3),a.TgZ(5,"div",4),a.TgZ(6,"input",5,6),a.NdJ("keyup.enter",function(){a.CHM(e);const i=a.MAs(7);return t.sendMessage(i.value),i.value=""}),a.qZA(),a.TgZ(8,"input",7),a.NdJ("click",function(){a.CHM(e);const i=a.MAs(7);return t.sendMessage(i.value),i.value=""}),a.qZA(),a.qZA(),a.qZA(),a.qZA()}2&e&&(a.xp6(3),a.Q6J("ngForOf",t.chat),a.xp6(3),a.uIk("disabled",0==t.backService.team||t.backService.team==t.backService.game.dynamicData.currentlyDrawingTeam||null))},directives:[n.sg],encapsulation:2}),e})(),ee=(()=>{class e{constructor(e,t){this.componentElement=e,this.frontService=t}ngOnInit(){}ngAfterViewInit(){this.colorChangeSubscription=this.frontService.colorChange.subscribe(e=>{this.componentElement.nativeElement.querySelector("#canvas").style.cursor="white"==e?"url(assets/images/eraser2.png), auto":"url(assets/images/pencil.png), auto"})}ngOnDestroy(){this.colorChangeSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(a.SBq),a.Y36(u.R))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-game"]],decls:17,vars:0,consts:[[1,"row"],[1,"col-sm-12","col-md-4","col-lg-4","col-xl-4","col-xxl-2"],[1,"col-sm-12","col-md-5","col-lg-5","col-xl-5","col-xxl-7"],[1,"col-12"],[1,"col-sm-12","col-md-3","col-lg-3","col-xl-3","col-xxl-3"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a._UZ(2,"app-sidebar"),a.qZA(),a.TgZ(3,"div",2),a.TgZ(4,"div",0),a.TgZ(5,"div",3),a._UZ(6,"app-word-info"),a.qZA(),a.TgZ(7,"div",3),a._UZ(8,"app-canvas"),a.qZA(),a.TgZ(9,"div",3),a._UZ(10,"app-tools"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(11,"div",4),a.TgZ(12,"div",0),a.TgZ(13,"div",3),a._UZ(14,"app-timer"),a.qZA(),a.TgZ(15,"div",3),a._UZ(16,"app-chat"),a.qZA(),a.qZA(),a.qZA(),a.qZA())},directives:[F,I,B,$,X,K],encapsulation:2}),e})();var te=i(3946);function ie(e,t){if(1&e){const e=a.EpF();a.ynx(0),a.TgZ(1,"li",34),a.TgZ(2,"label",35),a._uU(3),a.qZA(),a.TgZ(4,"label",7),a.TgZ(5,"a",36),a.NdJ("click",function(){a.CHM(e);const i=t.$implicit;return a.oxw().JoinFriendGame(i.id)}),a._UZ(6,"i",37),a.qZA(),a._uU(7,"\xa0 "),a.TgZ(8,"a",38),a.NdJ("click",function(){a.CHM(e);const i=t.$implicit;return a.oxw().deleteFriend(i.id)}),a._UZ(9,"i",39),a.qZA(),a.qZA(),a._UZ(10,"div",15),a.qZA(),a.BQk()}if(2&e){const e=t.$implicit;a.xp6(3),a.Oqu(e.name)}}let ne=(()=>{class e{constructor(e,t,i,n,o){this.backService=e,this.socialService=t,this.socketService=i,this.frontService=n,this.authService=o,this.friendList=[],this.user=e.user,this.socialService.getFriendList().subscribe(e=>{this.backService.friendList=e,this.backService.friendListSubject.next(e)}),this.friendListSubscription=this.backService.friendListSubject.subscribe(e=>{this.friendList=e}),this.socialService.onFriendListReceived().subscribe(e=>{this.friendList.push(e)}),this.socialService.wannaGetfriendList(),this.socialService.onStatus()}ngOnInit(){}deleteFriend(e){let t=this.friendList.find(t=>t.id==e);if(null!=t){let i=this.friendList.indexOf(t);this.friendList.splice(i,1),this.socialService.removeFriend(e)}}changeName(e){e.length<50?this.authService.changeField("username",e):this.frontService.showToast({type:"error",title:"Error",subhead:"El nombre de usuario supera los 50 caracteres",options:{}})}JoinFriendGame(e){this.socketService.joinFriendRoom(e)}sendFriendRequest(e){null!=e&&""!=e&&/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/.test(e)?this.socialService.sendFriendRequest(e):this.frontService.showToast({type:"error",title:"Error",subhead:"Introduce un email v\xe1lido",options:{}})}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(l.h),a.Y36(te.V),a.Y36(T.W),a.Y36(u.R),a.Y36(d.e))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-home-friends"]],decls:48,vars:3,consts:[[1,"container","dd-mgt-2"],[1,"jumbotron","list-content"],[1,"list-group"],[1,"list-group-item",2,"border-top","1px solid black"],[1,"d-flex","justify-content-center"],[1,"list-group-item",2,"padding","0 1rem"],[1,"dd-nick-list-friends",2,"margin-top","0.9rem","margin-bottom","0"],[1,"float-end"],["role","button","data-bs-toggle","dropdown",1,"btn","btn-warning","dropdown-toggle",2,"margin-top","0.9rem"],["aria-labelledby","dropdownMenuLink",1,"dropdown-menu","ul-change"],["for","nameUser",1,"d-flex","justify-content-center"],["type","text","name","nameUser",3,"value"],["newName",""],[1,"d-flex","justify-content-center","dd-mgt-3"],[1,"btn","btn-warning",3,"click"],[1,"break"],[1,"list-content","dd-mgt-3"],[1,"list-group","dd-union-card-top"],[1,"list-group-item",2,"border-bottom-right-radius","0","border-bottom-left-radius","0"],["role","tablist",1,"nav","nav-tabs"],["role","presentation",1,"nav-item"],["role","tab","id","friend-tab","data-bs-toggle","tab","data-bs-target","#friend","aria-controls","friend",1,"nav-link","active","notSelect"],["role","tab","id","search-tab","data-bs-toggle","tab","data-bs-target","#search","type","button","aria-controls","search",1,"nav-link","notSelect"],[1,"tab-content"],["id","friend","role","tabpanel","aria-labelledby","friend-tab",1,"tab-pane","fade","show","active"],["href","#",1,"list-group-item","title"],[1,"scroll-show-home","dd-union-card-bottom"],[1,"overflow-auto"],[4,"ngFor","ngForOf"],["id","search","role","tabpanel","aria-labelledby","search-tab",1,"tab-pane","fade"],[1,"jumbotron"],[1,"list-group-item","title",2,"border-top-left-radius","0","border-top-right-radius","0"],["id","search-input","type","search","id","form1","placeholder","Introduza aqu\xed el correo de su amigo.",1,"form-control",3,"keyup.enter"],["emailFriend",""],[1,"list-group-item"],[1,"dd-blue"],["title","Unirse a partida",1,"btn","btn-success","dd-mgt-4","btn-xs","glyphicon","glyphicon-trash",3,"click"],[1,"bi","bi-arrow-bar-right"],["title","Eliminar amigo",1,"btn","btn-danger","dd-mgt-4","btn-xs","glyphicon","glyphicon-trash",3,"click"],[1,"bi","bi-trash"]],template:function(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"ul",2),a.TgZ(3,"li",3),a.TgZ(4,"h5",4),a._uU(5,"TU PERFIL"),a.qZA(),a.qZA(),a.TgZ(6,"li",5),a.TgZ(7,"label",6),a._uU(8),a.qZA(),a.TgZ(9,"label",7),a.TgZ(10,"button",8),a._uU(11," Cambio de nombre "),a.qZA(),a.TgZ(12,"ul",9),a.TgZ(13,"li"),a.TgZ(14,"label",10),a._uU(15,"Nombre Actual"),a.qZA(),a._UZ(16,"br"),a._UZ(17,"input",11,12),a.qZA(),a.TgZ(19,"li",13),a.TgZ(20,"button",14),a.NdJ("click",function(){a.CHM(e);const i=a.MAs(18);return t.changeName(i.value)}),a._uU(21,"Cambiar"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a._UZ(22,"div",15),a.qZA(),a.qZA(),a.TgZ(23,"div",16),a.TgZ(24,"ul",17),a.TgZ(25,"li",18),a.TgZ(26,"ul",19),a.TgZ(27,"li",20),a.TgZ(28,"button",21),a._uU(29,"UNIRSE A PARTIDA"),a.qZA(),a.qZA(),a.TgZ(30,"li",20),a.TgZ(31,"button",22),a._uU(32,"AGREGAR AMIGO"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(33,"div",1),a.TgZ(34,"ul",2),a.TgZ(35,"div",23),a.TgZ(36,"div",24),a.TgZ(37,"li",25),a._uU(38," Lista de amigos "),a.qZA(),a.TgZ(39,"div",26),a.TgZ(40,"div",27),a.YNc(41,ie,11,1,"ng-container",28),a.qZA(),a.qZA(),a.qZA(),a.TgZ(42,"div",29),a.TgZ(43,"div",30),a.TgZ(44,"ul",2),a.TgZ(45,"li",31),a.TgZ(46,"input",32,33),a.NdJ("keyup.enter",function(){a.CHM(e);const i=a.MAs(47);return t.sendFriendRequest(i.value),i.value=""}),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}2&e&&(a.xp6(8),a.Oqu(t.user.name),a.xp6(9),a.s9C("value",t.user.name),a.xp6(24),a.Q6J("ngForOf",t.friendList))},directives:[n.sg],encapsulation:2}),e})(),oe=(()=>{class e{constructor(e,t){this.socketService=e,this.dataFrontService=t}ngOnInit(){}joinRoom(e){""==e.trim()?this.dataFrontService.showToast({type:"error",title:"C\xf3digo no v\xe1lido",subhead:"Introduce un c\xf3digo de partida v\xe1lido.",options:""}):e.match(/^[0-9a-fA-F]{24}$/)?this.socketService.joinRoom(e):this.dataFrontService.showToast({type:"error",title:"C\xf3digo no v\xe1lido",subhead:"Introduce un c\xf3digo de partida v\xe1lido.",options:""})}createRoom(){this.socketService.createRoom()}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(T.W),a.Y36(u.R))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-home"]],decls:49,vars:0,consts:[[1,"row"],[1,"col-12","col-sm-12","col-md-4","dd-mgb-2"],[1,"col-12","col-sm-12","col-md-8"],[1,"row","dd-mgt-1"],[1,"col-12","col-sm-12","col-md-4","dd-mgb-1"],[1,"container"],[1,"card"],[1,"d-grid"],[1,"btn","btn-success",3,"click"],[1,"d-flex"],["type","search","placeholder","C\xf3digo de la partida","aria-label","Search",1,"form-control","me-2",3,"key.enter"],["roomName",""],["type","submit",1,"btn","btn-success",3,"click"],[1,"col-12","col-sm-12","col-md-12"],[1,"container","dd-mgt-1"],[1,"card-header"],[1,"card-body"]],template:function(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",0),a.TgZ(1,"div",1),a._UZ(2,"app-home-friends"),a.qZA(),a.TgZ(3,"div",2),a.TgZ(4,"div",3),a.TgZ(5,"div",4),a.TgZ(6,"div",5),a.TgZ(7,"div",6),a.TgZ(8,"div",7),a.TgZ(9,"button",8),a.NdJ("click",function(){return t.createRoom()}),a._uU(10," Crear sala "),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(11,"div",2),a.TgZ(12,"div",5),a.TgZ(13,"div",7),a.TgZ(14,"form",9),a.TgZ(15,"input",10,11),a.NdJ("key.enter",function(){a.CHM(e);const i=a.MAs(16);return t.joinRoom(i.value)}),a.qZA(),a.TgZ(17,"button",12),a.NdJ("click",function(){a.CHM(e);const i=a.MAs(16);return t.joinRoom(i.value)}),a._uU(18,"Unirse"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(19,"div",13),a.TgZ(20,"div",14),a.TgZ(21,"div",6),a.TgZ(22,"h2",15),a._uU(23,"** NOTAS DEL PARCHE v.0.2.5-Alpha **"),a.qZA(),a.TgZ(24,"div",16),a.TgZ(25,"h5"),a._uU(26,"Ya es oficial la fecha de lanzamiento!!"),a.qZA(),a.TgZ(27,"p"),a._uU(28,"Tras una reuni\xf3n realizada el 07/04/2021 en las oficinas de Discord en Espa\xf1a, los encargados en el desarrollo y mantenimiento de dibudaw.io, pusieron fecha fin a la exposici\xf3n de la misma."),a.qZA(),a.TgZ(29,"ul"),a.TgZ(30,"li"),a._uU(31,"Espa\xf1a - 10:00 AM "),a.qZA(),a.TgZ(32,"li"),a._uU(33,"Argentina, Brasil, Chile, Uruguay - 05:00 AM"),a.qZA(),a.TgZ(34,"li"),a._uU(35,"Colombia - 03:00 AM"),a.qZA(),a.TgZ(36,"li"),a._uU(37,"M\xe9xico - 02:00 AM"),a.qZA(),a.qZA(),a.TgZ(38,"h5"),a._uU(39,"Soluci\xf3n de Bugs!"),a.qZA(),a.TgZ(40,"p"),a._uU(41,"Se han resuelto 3 bugs que afectaban al funcionamiento de la p\xe1gina, detectados gracias a vuestra comunicaci\xf3n con el soporte t\xe9cnico dibudaw@gmail.com"),a.qZA(),a.TgZ(42,"ul"),a.TgZ(43,"li"),a._uU(44,"Bot\xf3n de comenzar partida, no resaltaba color al pasar el mouse. "),a.qZA(),a.TgZ(45,"li"),a._uU(46,'Bot\xf3n "T\xfa perfil", no mostraba tu nick.'),a.qZA(),a.TgZ(47,"li"),a._uU(48,"Navegaci\xf3n por movil en el home, no funcionaba el responsive."),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}},directives:[ne,s.vK,s.JL,s.F],encapsulation:2}),e})();const re=new a.OlP("WindowToken","undefined"!=typeof window&&window.document?{providedIn:"root",factory:()=>window}:{providedIn:"root",factory:()=>{}});var se=i(5959);let ce=(()=>{class e{constructor(e,t){this.document=e,this.window=t,this.copySubject=new se.xQ,this.copyResponse$=this.copySubject.asObservable(),this.config={}}configure(e){this.config=e}copy(e){if(!this.isSupported||!e)return this.pushCopyResponse({isSuccess:!1,content:e});const t=this.copyFromContent(e);return this.pushCopyResponse(t?{content:e,isSuccess:t}:{isSuccess:!1,content:e})}get isSupported(){return!!this.document.queryCommandSupported&&!!this.document.queryCommandSupported("copy")&&!!this.window}isTargetValid(e){if(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement){if(e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');return!0}throw new Error("Target should be input or textarea")}copyFromInputElement(e,t=!0){try{this.selectTarget(e);const i=this.copyText();return this.clearSelection(t?e:void 0,this.window),i&&this.isCopySuccessInIE11()}catch(i){return!1}}isCopySuccessInIE11(){const e=this.window.clipboardData;return!(e&&e.getData&&!e.getData("Text"))}copyFromContent(e,t=this.document.body){if(this.tempTextArea&&!t.contains(this.tempTextArea)&&this.destroy(this.tempTextArea.parentElement||void 0),!this.tempTextArea){this.tempTextArea=this.createTempTextArea(this.document,this.window);try{t.appendChild(this.tempTextArea)}catch(n){throw new Error("Container should be a Dom element")}}this.tempTextArea.value=e;const i=this.copyFromInputElement(this.tempTextArea,!1);return this.config.cleanUpAfterCopy&&this.destroy(this.tempTextArea.parentElement||void 0),i}destroy(e=this.document.body){this.tempTextArea&&(e.removeChild(this.tempTextArea),this.tempTextArea=void 0)}selectTarget(e){return e.select(),e.setSelectionRange(0,e.value.length),e.value.length}copyText(){return this.document.execCommand("copy")}clearSelection(e,t){var i;e&&e.focus(),null===(i=t.getSelection())||void 0===i||i.removeAllRanges()}createTempTextArea(e,t){const i="rtl"===e.documentElement.getAttribute("dir");let n;return n=e.createElement("textarea"),n.style.fontSize="12pt",n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[i?"right":"left"]="-9999px",n.style.top=(t.pageYOffset||e.documentElement.scrollTop)+"px",n.setAttribute("readonly",""),n}pushCopyResponse(e){this.copySubject.next(e)}pushCopyReponse(e){this.pushCopyResponse(e)}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(n.K0),a.LFG(re,8))},e.\u0275prov=(0,a.Yz7)({factory:function(){return new e((0,a.LFG)(n.K0),(0,a.LFG)(re,8))},token:e,providedIn:"root"}),e})(),ae=(()=>{class e{}return e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({factory:function(t){return new(t||e)},imports:[[n.ez]]}),e})();function le(e,t){if(1&e){const e=a.EpF();a.ynx(0),a.TgZ(1,"li",27),a.TgZ(2,"label",28),a._uU(3),a.qZA(),a.TgZ(4,"label",7),a.TgZ(5,"a",29),a.NdJ("click",function(){a.CHM(e);const i=t.$implicit;return a.oxw().sendInvitationToFriend(i.id,i.name)}),a._UZ(6,"i",30),a.qZA(),a._uU(7,"\xa0 "),a.TgZ(8,"a",31),a.NdJ("click",function(){a.CHM(e);const i=t.$implicit;return a.oxw().deleteFriend(i.id)}),a._UZ(9,"i",32),a.qZA(),a.qZA(),a._UZ(10,"div",15),a.qZA(),a.BQk()}if(2&e){const e=t.$implicit;a.xp6(3),a.Oqu(e.name)}}let de=(()=>{class e{constructor(e,t,i,n){this.backService=e,this.socialService=t,this.socketService=i,this.dataFrontService=n,this.user=e.user,this.roomName=this.socketService.roomName,this.socialService.onInvitationReceived().subscribe(e=>{this.backService.invitationReceived=e,this.backService.invitationReceivedSubject.next(e)}),this.friendListSubscription=this.backService.friendListSubject.subscribe(e=>{this.friendList=e}),this.socialService.onFriendListReceived().subscribe(e=>{this.friendList.push(e)}),this.socialService.wannaGetfriendList(),this.socialService.onStatus()}ngOnInit(){}changeName(e){}joinRoom(e){24==e.length&&this.socketService.joinRoom(e)}deleteFriend(e){let t=this.friendList.find(t=>t.id==e);if(null!=t){let i=this.friendList.indexOf(t);this.friendList.splice(i,1),this.socialService.removeFriend(e)}}sendInvitationByEmail(e){null!=e&&""!=e&&/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/.test(e)?this.socialService.sendInvitation({email:e},this.roomName):this.dataFrontService.showToast({type:"error",title:"Error",subhead:"Introduce un email v\xe1lido",options:{}})}sendInvitationToFriend(e,t){this.socialService.sendInvitation({id:e},this.roomName,t)}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(l.h),a.Y36(te.V),a.Y36(T.W),a.Y36(u.R))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-lobby-friends"]],decls:40,vars:3,consts:[[1,"container","dd-mgt-2"],[1,"jumbotron","list-content"],[1,"list-group"],[1,"list-group-item",2,"border-top","1px solid black"],[1,"d-flex","justify-content-center"],[1,"list-group-item",2,"padding","0 1rem"],[1,"dd-nick-list-friends",2,"margin-top","0.9rem","margin-bottom","0"],[1,"float-end"],["role","button","data-bs-toggle","dropdown",1,"btn","btn-warning","dropdown-toggle",2,"margin-top","0.9rem"],["aria-labelledby","dropdownMenuLink",1,"dropdown-menu","ul-change"],["for","nameUser",1,"d-flex","justify-content-center"],["type","text","name","nameUser",3,"value"],["newName",""],[1,"d-flex","justify-content-center","dd-mgt-3"],[1,"btn","btn-warning",3,"click"],[1,"break"],[1,"jumbotron","dd-mgt-3"],[1,"list-group",2,"border-radius","0.25rem 0.25rem 0 0"],[1,"list-group-item","title"],[1,"input-group","mb-3"],["id","search-input form1","type","search","placeholder","Invitaci\xf3n por correo electr\xf3nico",1,"form-control",3,"keyup.enter"],["emailFriend",""],["type","button","id","button-addon2",1,"btn","btn-outline-primary",3,"click"],["href","#",1,"list-group-item","title",2,"border-top-left-radius","0","border-top-right-radius","0"],[1,"scroll-show-lobby","dd-union-card-bottom"],[1,"overflow-auto"],[4,"ngFor","ngForOf"],[1,"list-group-item"],[1,"name"],["title","Invitar a amigo",1,"btn","btn-success","btn-xs","glyphicon","glyphicon-ok",3,"click"],[1,"bi","bi-plus-circle"],["title","Eliminar amigo",1,"btn","btn-danger","btn-xs","glyphicon","glyphicon-trash",3,"click"],[1,"bi","bi-trash"]],template:function(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"ul",2),a.TgZ(3,"li",3),a.TgZ(4,"h5",4),a._uU(5,"T\xda PERFIL"),a.qZA(),a.qZA(),a.TgZ(6,"li",5),a.TgZ(7,"label",6),a._uU(8),a.qZA(),a.TgZ(9,"label",7),a.TgZ(10,"button",8),a._uU(11," Cambio de nick "),a.qZA(),a.TgZ(12,"ul",9),a.TgZ(13,"li"),a.TgZ(14,"label",10),a._uU(15,"Nombre Actual"),a.qZA(),a._UZ(16,"br"),a._UZ(17,"input",11,12),a.qZA(),a.TgZ(19,"li",13),a.TgZ(20,"button",14),a.NdJ("click",function(){a.CHM(e);const i=a.MAs(18);return t.changeName(i.value)}),a._uU(21,"Cambiar"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a._UZ(22,"div",15),a.qZA(),a.qZA(),a.qZA(),a.TgZ(23,"div",16),a.TgZ(24,"ul",17),a.TgZ(25,"li",18),a.TgZ(26,"h5",4),a._uU(27,"INVITAR A PARTIDA"),a.qZA(),a.TgZ(28,"div",19),a.TgZ(29,"input",20,21),a.NdJ("keyup.enter",function(){a.CHM(e);const i=a.MAs(30);return t.sendInvitationByEmail(i.value)}),a.qZA(),a.TgZ(31,"button",22),a.NdJ("click",function(){a.CHM(e);const i=a.MAs(30);return t.sendInvitationByEmail(i.value)}),a._uU(32,"Enviar"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(33,"div",1),a.TgZ(34,"ul",2),a.TgZ(35,"li",23),a._uU(36," Lista de amigos "),a.qZA(),a.TgZ(37,"div",24),a.TgZ(38,"div",25),a.YNc(39,le,11,1,"ng-container",26),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}2&e&&(a.xp6(8),a.Oqu(t.user.name),a.xp6(9),a.s9C("value",t.user.name),a.xp6(22),a.Q6J("ngForOf",t.friendList))},directives:[n.sg],encapsulation:2}),e})();function ue(e,t){1&e&&(a.ynx(0),a._UZ(1,"i",24),a.BQk())}function ge(e,t){if(1&e&&(a.TgZ(0,"div",22),a._uU(1),a.YNc(2,ue,2,0,"ng-container",23),a.qZA()),2&e){const e=t.$implicit,i=a.oxw();a.xp6(1),a.hij("",e.name," "),a.xp6(1),a.Q6J("ngIf",e.id==i.roomData.owner)}}function he(e,t){1&e&&(a.ynx(0),a._UZ(1,"i",24),a.BQk())}function pe(e,t){if(1&e&&(a.TgZ(0,"div",22),a._uU(1),a.YNc(2,he,2,0,"ng-container",23),a.qZA()),2&e){const e=t.$implicit,i=a.oxw(2);a.xp6(1),a.hij("",e.name," "),a.xp6(1),a.Q6J("ngIf",e.id==i.roomData.owner)}}function me(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",5),a.TgZ(1,"h6",25),a._uU(2),a.qZA(),a.TgZ(3,"div",26),a.NdJ("cdkDropListDropped",function(t){return a.CHM(e),a.oxw().drop(t)}),a.YNc(4,pe,3,2,"div",9),a.qZA(),a.qZA()}if(2&e){const e=t.$implicit,i=t.index,n=a.oxw();a.xp6(2),a.hij("Equipo ",i+1,""),a.xp6(1),a.s9C("id",i+1),a.Q6J("cdkDropListDisabled",!n.isOwner)("cdkDropListData",e),a.xp6(1),a.Q6J("ngForOf",e)}}let Ze=(()=>{class e{constructor(e,t,i,n,o){this.backService=e,this.socketService=t,this.router=i,this.clipBoard=n,this.frontService=o,this.isOwner=!1,this.roomData=!1,this.teams=[[{name:"Pherb",email:"phineasyferd@gmail.com",id:"69A"},{name:"Pinchos",email:"banderasbarden@gmail.com",id:"72B"}],[{name:"acho(T\xfa)",email:"userEmail@gmail.com",id:"userId"},{name:"Banderas",email:"banderasbarden@gmail.com",id:"72B"}],[{name:"Ferd",email:"ferdyphineas@gmail.com",id:"63H"},{name:"Barden",email:"bardenbanderas@gmail.com",id:"84X"}],[{name:"uaseou",email:"aseua@gmail.com",id:"65H"},{name:"Acho",email:"eieieie@gmail.com",id:"74X"}],[{name:"uaseou",email:"aseua@gmail.com",id:"83L"},{name:"Acho",email:"eieieie@gmail.com",id:"18G"}],[{name:"Pique",email:"pique@gmail.com",id:"37J"},{name:"Shakira",email:"shakira@gmail.com",id:"92A"}],[{name:"Messi",email:"lionelandresmessi@gmail.com",id:"10M"},{name:"LuisitoComunica",email:"luisitoelpillo@gmail.com",id:"83H"}]],this.user=this.backService.user,this.roomDataSubscription=this.backService.roomSubject.subscribe(e=>{this.roomData=e,this.teams=e.teams,this.isOwner=this.user.id==e.owner})}ngOnInit(){}drop(e){e.previousContainer===e.container?((0,o.bA)(e.container.data,e.previousIndex,e.currentIndex),console.log("if")):(console.log("else"),(0,o.EA)(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),this.socketService.teamSwitched(e.container.data[e.currentIndex].id,+e.previousContainer.id,+e.container.id))}pruebas(){this.router.navigate(["/main/game"])}startGame(){this.socketService.startGame()}startTimer(){}leaveRoom(){this.socketService.leaveRoom()}ngOnDestroy(){console.log(this.router.routerState.snapshot.url),"/main/game"!=this.router.routerState.snapshot.url&&(this.socketService.leaveRoom(),this.roomDataSubscription.unsubscribe())}copyRoomName(){this.clipBoard.copy(this.socketService.roomName),this.frontService.showToast({type:"success",title:"Copiado",subhead:"Codigo de la sala copiado al portapapeles",options:{}})}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(l.h),a.Y36(T.W),a.Y36(c.F0),a.Y36(ce),a.Y36(u.R))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-lobby"]],decls:33,vars:5,consts:[["cdkDropListGroup","",3,"className"],[1,"col-12","col-sm-12","col-md-4"],[1,"container","dd-mgt-2"],[1,"list-group"],["href","#",1,"list-group-item"],[1,"example-container"],[1,"d-flex","justify-content-center"],[1,"scroll-show-spectators"],["cdkDropList","","id","0",1,"example-list",3,"cdkDropListDisabled","cdkDropListData","cdkDropListDropped"],["class","example-box","cdkDrag","",4,"ngFor","ngForOf"],[1,"col-12","col-sm-12","col-md-8"],[1,"container","dd-mgt-1","dd-mgb-2"],["href","#",1,"list-group-item","notSelectDefault"],[1,"row"],[1,"col-1"],[1,"col-10"],["title","\xa1Tambien puedes copiar el c\xf3digo de la sala!",1,"btn","btn-primary",2,"border","2px solid black","padding","0 6px 0 6px","margin-left","2%",3,"click"],[1,"bi","bi-journals"],[2,"border-top","1px solid black","padding","0.5rem"],[1,"btn","btn-success","float-start",3,"click"],[1,"btn","btn-danger","float-end",3,"click"],["class","example-container",4,"ngFor","ngForOf"],["cdkDrag","",1,"example-box"],[4,"ngIf"],["title","Este usuario es el propietario de la sala",1,"bi","bi-controller"],[1,"notSelectDefault"],["cdkDropList","",1,"example-list",3,"id","cdkDropListDisabled","cdkDropListData","cdkDropListDropped"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a._UZ(2,"app-lobby-friends"),a.TgZ(3,"div",2),a.TgZ(4,"ul",3),a.TgZ(5,"li",4),a.TgZ(6,"div",5),a.TgZ(7,"h5",6),a._uU(8,"PARTIDA"),a.qZA(),a.TgZ(9,"h6"),a._uU(10,"En espera / Espectadores"),a.qZA(),a.TgZ(11,"div",7),a.TgZ(12,"div",8),a.NdJ("cdkDropListDropped",function(e){return t.drop(e)}),a.YNc(13,ge,3,2,"div",9),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(14,"div",10),a.TgZ(15,"div",11),a.TgZ(16,"ul",3),a.TgZ(17,"li",12),a.TgZ(18,"div",13),a._UZ(19,"div",14),a.TgZ(20,"div",15),a.TgZ(21,"h5",6),a._uU(22,"PARTIDA "),a.TgZ(23,"button",16),a.NdJ("click",function(){return t.copyRoomName()}),a._UZ(24,"i",17),a.qZA(),a.qZA(),a.qZA(),a._UZ(25,"div",14),a.qZA(),a.TgZ(26,"div",18),a.TgZ(27,"button",19),a.NdJ("click",function(){return t.startGame()}),a._uU(28,"Comenzar partida"),a.qZA(),a.TgZ(29,"button",20),a.NdJ("click",function(){return t.leaveRoom()}),a._uU(30,"Abandonar partida"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(31,"li",4),a.YNc(32,me,5,5,"div",21),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.Q6J("className",t.roomData.owner==t.user.id?"activer row":"inactiver row"),a.xp6(12),a.Q6J("cdkDropListDisabled",!t.isOwner)("cdkDropListData",t.teams[0]),a.xp6(1),a.Q6J("ngForOf",t.teams[0]),a.xp6(19),a.Q6J("ngForOf",t.teams.slice(1)))},directives:[o.Fd,de,o.Wj,n.sg,o.Zt,n.O5],encapsulation:2}),e})();function be(e,t){if(1&e){const e=a.EpF();a.ynx(0),a.TgZ(1,"li",21),a._uU(2),a.qZA(),a.TgZ(3,"div",22),a.TgZ(4,"button",23),a.NdJ("click",function(){a.CHM(e);const i=t.$implicit;return a.oxw().acceptFriendRequest(i.id)}),a._uU(5,"Aceptar"),a.qZA(),a.TgZ(6,"button",24),a.NdJ("click",function(){a.CHM(e);const i=t.$implicit;return a.oxw().declineFriendRequest(i.id)}),a._uU(7,"Rechazar"),a.qZA(),a.qZA(),a.BQk()}if(2&e){const e=t.$implicit;a.xp6(2),a.hij("",e.name," te ha enviado una solicitud de amistad:")}}function ve(e,t){if(1&e){const e=a.EpF();a.ynx(0),a.TgZ(1,"li",21),a._uU(2),a.qZA(),a.TgZ(3,"div",22),a.TgZ(4,"button",23),a.NdJ("click",function(){a.CHM(e);const i=t.$implicit;return a.oxw().joinRoom(i.id)}),a._uU(5,"Aceptar"),a.qZA(),a.TgZ(6,"button",24),a.NdJ("click",function(){a.CHM(e);const i=t.$implicit;return a.oxw().rechazaInvitation(i.id)}),a._uU(7,"Rechazar"),a.qZA(),a.qZA(),a.BQk()}if(2&e){const e=t.$implicit;a.xp6(2),a.hij("",e.name," te ha invitado a su partida:")}}const fe=function(){return["/main/config/email"]},Ae=function(){return["/main/config/password"]},Te=function(){return["/terms"]},qe=function(){return["/home"]};let ke=(()=>{class e{constructor(e,t,i,n,o,r){this.authService=e,this.backService=t,this.socialService=i,this.socketService=n,this.el=o,this.frontService=r,this.inRoom=!1,this.friendRequests=[],this.invitationList=[],this.total=0,this.user=t.user,this.friendRequests=this.backService.friendRequests,this.invitationList=this.backService.invitationReceived,this.socialService.onFriendRequests().subscribe(e=>{this.backService.friendRequests=e,this.backService.friendRequestSubject.next(this.backService.friendRequests),this.total=this.friendRequests.length+this.invitationList.length}),this.friendRequestsSubscription=this.backService.friendRequestSubject.subscribe(e=>{this.friendRequests=e,this.total=this.friendRequests.length+this.invitationList.length}),this.friendRequestReceivedSubscription=this.socialService.onFriendRequestReceived().subscribe(e=>{this.friendRequests.push(e),this.total=this.friendRequests.length+this.invitationList.length,this.frontService.playSound("notification")}),this.socialService.wannaGetFriendRequest(),this.invitationListSubscription=this.backService.invitationReceivedSubject.subscribe(e=>{this.invitationList.push(e),this.total=this.friendRequests.length+this.invitationList.length}),this.invitationReceivedSubscription=this.socialService.onInvitationReceived().subscribe(e=>{this.invitationList.push(e),this.total=this.invitationList.length+this.friendRequests.length,this.frontService.playSound("notification")})}ngOnDestroy(){this.friendRequestsSubscription.unsubscribe(),this.invitationListSubscription.unsubscribe(),this.friendRequestReceivedSubscription.unsubscribe()}ngOnInit(){}acceptFriendRequest(e){let t=this.friendRequests.find(t=>t.id==e);if(null!=t){let i=this.friendRequests.indexOf(t);this.backService.friendRequests.splice(i,1),this.backService.friendRequestSubject.next(this.backService.friendRequests),this.socialService.wannaAcceptFriendRequest(e),this.total=this.invitationList.length+this.friendRequests.length}}declineFriendRequest(e){let t=this.friendRequests.find(t=>t.id==e);if(null!=t){let i=this.friendRequests.indexOf(t);this.backService.friendRequests.splice(i,1),this.backService.friendRequestSubject.next(this.backService.friendRequests),this.socialService.wannaDeclineFriendRequest(e),this.total=this.invitationList.length+this.friendRequests.length}}joinRoom(e){if(24==e.length&&this.socketService.joinRoom(e),null!=e){let t=this.invitationList.indexOf(e);this.invitationList.splice(t,1)}}rechazaInvitation(e){if(null!=e){let t=this.invitationList.indexOf(e);this.invitationList.splice(t,1)}}toggleSound(){this.backService.sound=!this.backService.sound,this.frontService.setSounds(this.backService.sound)}toggleMusic(){this.backService.music=!this.backService.music,this.frontService.setMusic(this.backService.music)}logout(){this.authService.userLogout()}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(d.e),a.Y36(l.h),a.Y36(te.V),a.Y36(T.W),a.Y36(a.SBq),a.Y36(u.R))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-main"]],decls:47,vars:13,consts:[[1,"row"],[1,"col-2"],[1,"dropdown"],["role","button","id","dropdownMenuLink","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-dark","dropdown-toggle","float-start","settings"],[1,"bi","bi-gear-fill"],["aria-labelledby","dropdownMenuLink",1,"dropdown-menu"],[1,"text-center","text-decoration-underline"],[1,"dropdown-item",3,"routerLink"],[1,"dropdown-item","notSelect",3,"click"],[1,"col-6","text-center"],["title","Musica de fondo",1,"btn","btn-config",3,"click"],["alt","Nota Musical"],["title","Efectos de sonido",1,"btn","btn-config",3,"click"],["alt","Altavoz"],[1,"col-8","d-flex","justify-content-center"],[1,"text-decoration-none",3,"routerLink"],[1,"dibudaw","dd-mgt-4"],[1,"bi","bi-pencil","white",2,"font-size","20px"],["role","button","id","dropdownMenuLink","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-warning","dropdown-toggle","float-end","notifications"],[1,"bi","bi-bell-fill","badgial",2,"font-size","1rem",3,"id"],[4,"ngFor","ngForOf"],[1,"dropdown-item","notSelectDefault","dd-blue-msg"],[1,"text-center"],[1,"btn","btn-outline-success","btn-sm","dd-mgb-4",3,"click"],[1,"btn","btn-outline-danger","btn-sm","dd-mgb-4",2,"margin-left","2%",3,"click"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a.TgZ(3,"a",3),a._UZ(4,"i",4),a.qZA(),a.TgZ(5,"ul",5),a.TgZ(6,"li"),a.TgZ(7,"p",6),a._uU(8,"Usuario:"),a.qZA(),a.qZA(),a.TgZ(9,"li"),a.TgZ(10,"a",7),a._uU(11,"Cambiar E-mail"),a.qZA(),a.qZA(),a.TgZ(12,"li"),a.TgZ(13,"a",7),a._uU(14,"Cambiar Contrase\xf1a"),a.qZA(),a.qZA(),a.TgZ(15,"li"),a.TgZ(16,"a",7),a._uU(17,"Terminos y condiciones"),a.qZA(),a.qZA(),a.TgZ(18,"li"),a.TgZ(19,"a",8),a.NdJ("click",function(){return t.logout()}),a._uU(20,"Cerrar sesi\xf3n"),a.qZA(),a.qZA(),a._UZ(21,"br"),a.TgZ(22,"li"),a.TgZ(23,"p",6),a._uU(24,"Sonido:"),a.qZA(),a.qZA(),a.TgZ(25,"li"),a.TgZ(26,"div",0),a.TgZ(27,"div",9),a.TgZ(28,"button",10),a.NdJ("click",function(){return t.toggleMusic()}),a._UZ(29,"img",11),a.qZA(),a.qZA(),a.TgZ(30,"div",9),a.TgZ(31,"button",12),a.NdJ("click",function(){return t.toggleSound()}),a._UZ(32,"img",13),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(33,"div",14),a.TgZ(34,"a",15),a.TgZ(35,"h1",16),a._uU(36,"dibudaw\xa0"),a._UZ(37,"i",17),a.qZA(),a.qZA(),a.qZA(),a.TgZ(38,"div",1),a.TgZ(39,"div",2),a.TgZ(40,"a",18),a.TgZ(41,"i",19),a._uU(42,"\x07"),a.qZA(),a.qZA(),a.TgZ(43,"ul",5),a.YNc(44,be,8,1,"ng-container",20),a.YNc(45,ve,8,1,"ng-container",20),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a._UZ(46,"router-outlet")),2&e&&(a.xp6(10),a.Q6J("routerLink",a.DdM(9,fe)),a.xp6(3),a.Q6J("routerLink",a.DdM(10,Ae)),a.xp6(3),a.Q6J("routerLink",a.DdM(11,Te)),a.xp6(13),a.uIk("src",t.backService.music?"assets/images/music-note.png":"assets/images/music-note-beamed.png",a.LSH),a.xp6(3),a.uIk("src",t.backService.sound?"assets/images/volume-up-fill.png":"assets/images/volume-mute-fill.png",a.LSH),a.xp6(2),a.Q6J("routerLink",a.DdM(12,qe)),a.xp6(7),a.s9C("id",t.total),a.xp6(3),a.Q6J("ngForOf",t.friendRequests),a.xp6(1),a.Q6J("ngForOf",t.invitationList))},directives:[c.yS,n.sg,c.lC],encapsulation:2}),e})(),xe=(()=>{class e{constructor(e){this.socketService=e}canActivate(e,t){return console.log("canActivate gameguard"),this.socketService.onGameStatus()}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(T.W))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Se=[{path:"",component:ke,children:[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:oe},{path:"lobby",component:Ze,canActivate:[(()=>{class e{constructor(e){this.socketService=e}canActivate(e,t){return this.socketService.onRoomCreated()}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(T.W))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()]}]},{path:"game",component:ee,canActivate:[xe]},{path:"config",component:A},{path:"config/email",component:p},{path:"config/password",component:b},{path:"**",redirectTo:""}];let we=(()=>{class e{}return e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({factory:function(t){return new(t||e)},imports:[[c.Bz.forChild(Se)],c.Bz]}),e})(),ye=(()=>{class e{}return e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({factory:function(t){return new(t||e)},imports:[[n.ez,c.Bz,we,o._t,r.JF,s.u5,s.UX,ae]]}),e})()}}]);